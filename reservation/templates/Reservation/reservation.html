{% extends 'base.html' %} {% load static %} {% block content %}

<!-- ======= Book A Table Section ======= -->
<section id="book-a-table" class="book-a-table">
  <div class="container" data-aos="fade-up">
    <div class="section-title">
      <h2>Reservation</h2>
      <p>Your Booking</p>
      {% if user.is_authenticated %}

      <table class="table">
        <tr class="table-primary">
          {% for reserve in orders %}
          <th scope="col">Id</th>
         
          <th scope="col">Guests</th>

          <th scope="col">Time</th>
          <th scope="col">Date</th>
         
          <th scope="col">Reservation Status</th>
          <th scope="col">View</th>
          <th scope="col">Update</th>
          <th scope="col">Delete</th>
          <th scope="col">Book new table</th>
        </tr>

        <tr class="table-success">
          <th scope="row">{{reserve.id}}</th>

          <td>{{reserve.persons}}</td>

          <td>{{reserve.time}}</td>
          <td>{{ reserve.date|date:"d/m/Y"}}</td>

          {% if reserve.status == 'rejected' %}
          
          <td>{{ reserve.status }}</td>
          <td>
            <a
              class="btn btn-secondary disabled"
              href="{% url 'reservation:customer_table' reserve.id%}"
              >view</a
            >
          </td>
  
          <td>
            <a
              class="btn btn-secondary disabled"
              href="{% url 'reservation:update_order' reserve.id%}"
              >Update</a
            >
          </td>
          <td>
            <a
              class="btn btn-danger"
              href="{% url 'reservation:delete_order' reserve.id%}"
              >Delete</a
            >
          </td>
          <td>
            <a class="btn btn-secondary disabled" href="{% url 'reservation:create_order' %}"
            >Book new table</a
            >
          </td>
          
         
         
          <!-- If reservation has been rejected -->
          {% elif reserve.status == 'expired' %}
         <td>{{ reserve.status }}</td>

         <td>
          <a
            class="btn btn-secondary disabled"
            href="{% url 'reservation:customer_table' reserve.id%}"
            >view</a
          >
        </td>

        <td>
          <a
            class="btn btn-secondary disabled"
            href="{% url 'reservation:update_order' reserve.id%}"
            >Update</a
          >
        </td>
        <td>
          <a
            class="btn btn-secondary disabled"
            href="{% url 'reservation:delete_order' reserve.id%}"
            >Delete</a
          >
        </td>
        <td>
          <a class="btn btn-secondary disabled" href="{% url 'reservation:create_order' %}"
          >Book new table</a
          >
        </td>
        
         
          <!-- For 'pending' or 'confirmed' -->
          {% else %}
          
          

          <td>{{reserve.status}}</td>

       
          <td>
            <a
              class="btn btn-info"
              href="{% url 'reservation:customer_table' reserve.id%}"
              >view Reservation</a
            >
          </td>

          <td>
            <a
              class="btn btn-success"
              href="{% url 'reservation:update_order' reserve.id%}"
              >Update Reservation</a
            >
          </td>
          <td>
            <a
              class="btn btn-danger"
              href="{% url 'reservation:delete_order' reserve.id%}"
              >Cancel Reservation</a
            >
          </td>
          <td>
            <a class="btn btn-info" href="{% url 'reservation:create_order' %}"
            >Book new table</a
            >
          </td>
        </tr>
        {% endif %}
        {% endfor %}
      </table>
    </div>
    {% else %}
    <h3>You must be logged in</h3>
    <a href="{% url 'reservation:login' %}">Loggin</a>
    {% endif %}

    <!-- {% for messagess in messages %}
      <center>
        <div class="alert alert-success" role="alert" id="msg">
          <h4 class="alert-heading">Thank you!</h4>
        <h5>Your table booking done successfully and we will respond shortly...</h5>
        
        
      </div>
      </center>
        <br>
        <br>
      {% endfor %} -->
  </div>
</section>
<!-- End Book A Table Section -->

{% endblock content %}
